<!DOCTYPE html>
<html lang="{{ g.lang or 'ge' }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GreenSpots â€” {% if g.lang=='en' %}Registration{% else %}áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ{% endif %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='img/logo.png') }}">
    <style>
        .auth-container { display: flex; min-height: 100vh; flex-direction: row; padding-top: 80px; } /* Added padding for header */
        .auth-left { flex: 1; display: flex; flex-direction: column; justify-content: center; padding: 60px; background-color: #f5f5f5; }
        .auth-left h2 { font-size: 2rem; margin-bottom: 10px; color: #2b9348; }
        .auth-left p { font-size: 1rem; margin-bottom: 30px; color: #555; }
        .auth-left form { display: flex; flex-direction: column; gap: 15px; }
        .auth-left .form-group { display: flex; flex-direction: column; }
        .auth-left .form-group input { padding: 12px; font-size: 1rem; border: 1px solid #ccc; border-radius: 6px; }
        .auth-left button { padding: 12px; font-size: 1rem; background-color: #2b9348; color: #fff; border: none; border-radius: 6px; cursor: pointer; transition: 0.3s; }
        .auth-left .auth-switch { margin-top: 15px; font-size: 0.9rem; color: #2c7a7b; text-decoration: none; }
        #password-requirements { list-style: none; padding-left: 0; font-size: 0.85rem; }
        #password-requirements li.invalid { color: gray; }
        #password-requirements li.valid { color: green; font-weight: bold; }
        .auth-right { flex: 1; background-image: url('{{ url_for('static', filename='img/register.jpg') }}'); background-size: cover; background-position: center; }
        @media (max-width: 900px) { .auth-container { flex-direction: column; } .auth-left, .auth-right { flex: unset; height: 50vh; } }
    </style>
</head>
<body>
    {% include "header.html" %}

    <div class="auth-container">
        <div class="auth-left">
            {% with messages = get_flashed_messages() %}
              {% if messages %}
                <div class="container mt-5">
                  {% for message in messages %}
                    <div class="alert alert-info">{{ message }}</div>
                  {% endfor %}
                </div>
              {% endif %}
            {% endwith %}
            <h2>{% if g.lang=='en' %}Register{% else %}áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ{% endif %}</h2>
            <p>{% if g.lang=='en' %}Create an account and discover Georgia with us ğŸŒ¿{% else %}áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜ áƒáƒœáƒ’áƒáƒ áƒ˜áƒ¨áƒ˜ áƒ“áƒ áƒáƒ¦áƒ›áƒáƒáƒ©áƒ˜áƒœáƒ” áƒ¡áƒáƒ¥áƒáƒ áƒ—áƒ•áƒ”áƒšáƒ áƒ©áƒ•áƒ”áƒœáƒ¡ áƒ’áƒ•áƒ”áƒ áƒ“áƒ˜áƒ— ğŸŒ¿{% endif %}</p>

            <form method="POST" class="auth-form">
                {{ form.hidden_tag() }}
                <div class="form-group">
                    <label>{% if g.lang=='en' %}Username{% else %}áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒšáƒ˜áƒ¡ áƒ¡áƒáƒ®áƒ”áƒšáƒ˜{% endif %}</label>
                    {{ form.username(class="form-control", placeholder="Username") }}
                </div>
                <div class="form-group">
                    <label>{% if g.lang=='en' %}Email{% else %}áƒ”áƒš-áƒ¤áƒáƒ¡áƒ¢áƒ{% endif %}</label>
                    {{ form.email(class="form-control", placeholder="example@email.com", type="email", required=True) }}
                </div>
                <div class="form-group position-relative">
                    <label>{% if g.lang=='en' %}Password{% else %}áƒáƒáƒ áƒáƒšáƒ˜{% endif %}</label>
                    <div class="input-group">
                        {{ form.password(class="form-control", id="password", placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢") }}
                        <span class="input-group-text toggle-password" data-target="password" style="cursor: pointer;">
                            <i class="bi bi-eye"></i>
                        </span>
                    </div>
                    <ul id="password-requirements">
                        <li id="length" class="invalid">{% if g.lang=='en' %}At least 8 characters{% else %}áƒ›áƒ˜áƒœáƒ˜áƒ›áƒ£áƒ› 8 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒ{% endif %}</li>
                        <li id="uppercase" class="invalid">{% if g.lang=='en' %}At least 1 uppercase letter{% else %}áƒ›áƒ˜áƒœáƒ˜áƒ›áƒ£áƒ› 1 áƒ›áƒ—áƒáƒ•áƒ áƒ£áƒšáƒ˜ áƒáƒ¡áƒ{% endif %}</li>
                        <li id="number" class="invalid">{% if g.lang=='en' %}At least 1 number{% else %}áƒ›áƒ˜áƒœáƒ˜áƒ›áƒ£áƒ› 1 áƒªáƒ˜áƒ¤áƒ áƒ˜{% endif %}</li>
                        <li id="special" class="invalid">{% if g.lang=='en' %}At least 1 special character (!@#$%^&*){% else %}áƒ›áƒ˜áƒœáƒ˜áƒ›áƒ£áƒ› 1 áƒ¡áƒ˜áƒ›áƒ‘áƒáƒšáƒ (!@#$%^&*){% endif %}</li>
                    </ul>
                </div>
                <div class="form-group">
                    <label>{% if g.lang=='en' %}Confirm Password{% else %}áƒ“áƒáƒáƒ“áƒáƒ¡áƒ¢áƒ£áƒ áƒ”áƒ— áƒáƒáƒ áƒáƒšáƒ˜{% endif %}</label>
                    <div class="input-group">
                        {{ form.confirm_password(class="form-control", id="confirm_password", placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢") }}
                        <span class="input-group-text toggle-password" data-target="confirm_password" style="cursor: pointer;">
                            <i class="bi bi-eye"></i>
                        </span>
                    </div>
                </div>
                <button type="submit">{% if g.lang=='en' %}Register{% else %}áƒ áƒ”áƒ’áƒ˜áƒ¡áƒ¢áƒ áƒáƒªáƒ˜áƒ{% endif %}</button>
            </form>

            <a href="{{ url_for('auth_bp.login') }}" class="auth-switch">
                {% if g.lang=='en' %}Already have an account? <strong>Login</strong>{% else %}áƒ’áƒáƒ¥áƒ•áƒ¡ áƒáƒœáƒ’áƒáƒ áƒ˜áƒ¨áƒ˜? <strong>áƒ¨áƒ”áƒ¡áƒ•áƒšáƒ</strong>{% endif %}
            </a>
        </div>
        <div class="auth-right"></div>
    </div>

    {% include "footer.html" %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    // Password validation logic
    const passwordInput = document.getElementById("password");
    const requirements = {
        length: document.getElementById("length"),
        uppercase: document.getElementById("uppercase"),
        number: document.getElementById("number"),
        special: document.getElementById("special")
    };

    passwordInput.addEventListener("input", () => {
        const val = passwordInput.value;
        requirements.length.className = val.length >= 8 ? "valid" : "invalid";
        requirements.uppercase.className = /[A-Z]/.test(val) ? "valid" : "invalid";
        requirements.number.className = /[0-9]/.test(val) ? "valid" : "invalid";
        requirements.special.className = /[!@#$%^&*]/.test(val) ? "valid" : "invalid";
    });

    // Toggle password visibility
    document.querySelectorAll(".toggle-password").forEach(btn => {
        btn.addEventListener("click", () => {
            const input = document.getElementById(btn.dataset.target);
            const icon = btn.querySelector("i");
            input.type = input.type === "password" ? "text" : "password";
            icon.classList.toggle("bi-eye");
            icon.classList.toggle("bi-eye-slash");
        });
    });
    </script>
</body>
</html>